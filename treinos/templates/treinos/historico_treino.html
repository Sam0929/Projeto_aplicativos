{% extends 'treinos/base.html' %}
{% block title %}Hist칩rico{% endblock title %}
{% block header %}Hist칩rico de Treinos{% endblock header %}

{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'treinos/css/historico_treino.css' %}">
{% endblock %}

{% block content %}

<script>
  function toggleDetalhes(id) {
    document.getElementById(`detalhes-${id}`).classList.toggle('hidden');
  }
</script>

<div class="timeline-container">
  {% for execucao in execucoes %}
    <div class="timeline-item">
      <div class="timeline-header">
        <h3>{{ execucao.treino.nome }}</h3>
        <span class="date">{{ execucao.data_inicio|date:"d/m/Y H:i" }}</span>
      </div>

      <div class="timeline-stats">
        <div class="stat">
          <span class="label">Dura칞칚o</span>
          <span class="value">{{ execucao.duracao_minutos }} min</span>
        </div>
        <div class="stat">
          <span class="label">Desempenho</span>
          <span class="value">{{ execucao.desempenho }}</span>
        </div>
      </div>

      <button class="btn-detalhes"
              onclick="toggleDetalhes({{ execucao.id }})">
        Exibir detalhes
      </button>

      <div id="detalhes-{{ execucao.id }}" class="detalhes-execucao hidden">
        {% if execucao.detalhes %}
          {% for d in execucao.detalhes %}
            <div>
              <strong>{{ d.exercicio }}</strong><br>
              Carga usada nesta execu칞칚o:
                <strong>{{ d.cargas_usadas|join:", " }} kg</strong><br>
              Carga mais usada (hist칩rico):
                <strong>{{ d.carga_mais_usada }} kg</strong><br>
              Carga m치xima (hist칩rico):
                <strong>{{ d.carga_maxima }} kg</strong>
            </div>
          {% endfor %}
        {% else %}
          <p>Sem dados de carga para este treino.</p>
        {% endif %}
      </div>
    </div>
  {% empty %}
    <div class="empty-state">
      <div class="icon">游닆</div>
      <p>Nenhuma execu칞칚o de treino ainda.</p>
    </div>
  {% endfor %}
</div>
{% endblock content %}
